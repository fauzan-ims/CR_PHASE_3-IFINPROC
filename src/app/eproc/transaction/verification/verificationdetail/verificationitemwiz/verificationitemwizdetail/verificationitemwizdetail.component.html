<div class="main-content margin-wizard-content">
  <!-- spinner region -->
  <div class="panel-container-spinner" *ngIf="showSpinner">
    <app-spinner class="spinner-container"></app-spinner>
  </div>
  <!-- end spinner region -->
  <div class="row">
    <div class="col-md-12">
      <div class="card-body ">
        <!--#region form-->
        <form #masterrequestitemForm="ngForm"
          (ngSubmit)="onFormSubmit(masterrequestitemForm.value, masterrequestitemForm.valid)">
          <!--#region button submit dan back-->
          <button type="save" class="btn btn-info btn-round" data-role="R00021530002153C">Save</button>
          <button type="button" class="btn btn-danger btn-round" (click)="btnBack()">Back</button>
          <button hidden id="verifitemdetailwiz" type="button" (click)="callGetrow()"></button>
          <!--#endregion button submit dan back-->

          <!--#region row-->
          <div class="row">
            <!--#region p_id-->
            <input hidden type="text" [ngModel]="this.params" name="p_id">
            <!--#endregion p_id-->

            <!--#region p_vendor_code-->
            <input hidden type="text" [ngModel]="this.param" name="p_code">
            <!--#endregion p_vendor_code-->

            <!--#region quantity_request-->
            <div class="col-md-4">
              <div class="form-group">
                <label class="control-label">Quantity Request *</label>
                <div class="col-4">
                  <input type="text" class="form-control col-md-6" [ngModel]="model.quantity_request" name="p_quantity_request"
                  maxlength="4" required #quantity_request="ngModel" pattern={{NumberOnlyPattern}}>
                  <small
                    *ngIf="(quantity_request.errors?.required && quantity_request.touched) || (quantity_request.errors?.required && masterrequestitemForm.submitted)"
                    class="text-danger">
                    Quantity Request is required
                  </small>
                  <small *ngIf="quantity_request.errors?.pattern && quantity_request.touched" class="text-danger">
                    Quantity Request is required and format should be <i>0-9</i>.
                  </small>
                </div>
              </div>
            </div>
            <!--#endregion area quantity_request-->

            <!--#region approved_quantity-->
            <div class="col-md-4">
              <div class="form-group">
                <label class="control-label">Quantity Approved *</label>
                <input type="text" class="form-control col-md-6" [ngModel]="model.approved_quantity" name="p_approved_quantity"
                  maxlength="20" required #approved_quantity="ngModel" pattern={{NumberOnlyPattern}}>
              </div> 
            </div>
            <!--#endregion area approved_quantity-->

            <!--#region item_code-->
            <div class="col-md-4">
              <label class="labelgsubcode">Item *</label>
              <div class="form-group">
                <div class="col-md-12">
                  <span>
                    <button class="btn btn-icon btn-outline-default btn-round btn-md btn-lookup-margin" type="button"
                      (click)="btnLookupItemCode()" data-target="#lookupModalItemCode" data-toggle="modal" href="#">
                      <i class="fa fa-search-plus"></i></button> {{model.item_name}}
                    <input type="hidden" name="p_item_code" [ngModel]="model.item_code" required #item_code="ngModel" />
                    <input type="hidden" name="p_item_name" [ngModel]="model.item_name" required #item_name="ngModel" />
                  </span>
                </div>
                <small
                  *ngIf="item_code.errors?.required && item_code.touched || (item_code.errors?.required && masterrequestitemForm.submitted)"
                  class="text-danger">
                  Item is required
                </small>
              </div>
            </div>
            <!--#endregion item_code-->

            <!--#region specification-->
            <div class="col-md-4">
              <div class="form-group" [class.has-error]="specification.invalid && specification.touched">
                <label for="specification" class="control-label">Specification *</label>
                <textarea type="text" class="form-control" [ngModel]="model.specification" name="p_specification"
                  maxlength="4000" required #specification="ngModel"></textarea>
                <small
                  *ngIf="(specification.errors?.required && specification.touched) || (specification.errors?.required && masterrequestitemForm.submitted)"
                  class="text-danger">
                  Specification is required
                </small>
              </div>
            </div>
            <!--#endregion specification-->

            <!--#region remark-->
            <div class="col-md-4">
              <div class="form-group" [class.has-error]="remark.invalid && remark.touched">
                <label for="remark" class="control-label">Remark *</label>
                <textarea type="text" class="form-control" [ngModel]="model.remark" name="p_remark" maxlength="4000"
                  required #remark="ngModel"></textarea>
                <small
                  *ngIf="(remark.errors?.required && remark.touched) || (remark.errors?.required && masterrequestitemForm.submitted)"
                  class="text-danger">
                  Remark is required
                </small>
              </div>
            </div>
            <!--#endregion remark-->
          </div>
          <!--#endregion row-->

        </form>
        <!--#end region form-->

      </div>
      <div class="card-footer ">
      </div>
    </div>
  </div>
</div>

<!--#region lookup ItemCode-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalItemCode"
  style="margin-top: -65px">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="overflow:hidden;">
        <div class="col-md-12">
          <div class="card-body col-md-12">
            <table id="datatableLookupItemCode" class="table table-striped table-bordered hover" cellspacing="0"
              style="width: 100%;">
              <thead>
                <tr>
                  <th style="display: none;"></th>
                  <th class="disabled-sorting">No</th>
                  <th>Code</th>
                  <th>Description</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of lookupitemcode;let i=index ">
                  <td class="if-no-edit-btn" style="display: none;"></td>
                  <td style="text-align: center;">{{lookupitemcode.numberIndex+i+1}}</td>
                  <td style="width: 20%;text-align: center;">{{ row.code }}</td>
                  <td style="width: 80%;">{{ row.description }}</td>
                  <td class="text-center">
                    <button class="btn btn-outline-default btn-round"
                      (click)="btnSelectRowItemCode(row.code, row.description)">Select</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--#endregion lookup ItemCode -->