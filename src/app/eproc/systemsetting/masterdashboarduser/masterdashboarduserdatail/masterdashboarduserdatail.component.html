<div class="main-content">
    <!-- spinner region -->
    <div class="panel-container-spinner" *ngIf="showSpinner">
        <app-spinner class="spinner-container"></app-spinner>
    </div>
    <!-- end spinner region -->
    <div class="row">
        <div class="col-md-12">
            <div class="card ">
                <!--#region watermark-->
                <div class="watermark" [hidden]="this.isWatermark === '0'">
                    <h6>{{this.companyName}}</h6>
                    <h6>{{this.userName}}</h6>
                    <h6>{{this.sysDate | date}} {{this.currentTime}}</h6>
                </div>
                <!--#endregion watermark-->
                <div class="card-header ">
                    <h5 class="card-title">Master Dashboard User Info</h5>
                </div>
                <div class="card-body ">
                    <!--#region form-->
                    <form #masterdashboarduserdetailForm="ngForm"
                        (ngSubmit)="onFormSubmit(masterdashboarduserdetailForm.value, masterdashboarduserdetailForm.valid)">
                        <!--#region button submit dan back-->
                        <button type="submit" class="btn btn-info btn-round" data-role="R00024420000004C">Save</button>
                        <button type="button" class="btn btn-danger btn-round" (click)="btnBack()">Back</button>
                        <!--#endregion button submit dan back-->

                        <!--#region row-->
                        <div class="row">

                            <input type="hidden" name="p_id" [ngModel]="model.id">

                            <!--#region module name-->
                            <div class="col-md-4">
                                <label class="control-label labelmodule">Employee *</label>
                                <div class="form-group">
                                    <span class="col-md-12 buttons">
                                        <button class="btn btn-icon btn-outline-default btn-round btn-md col-md-4"
                                            type="button" (click)="btnLookupModalEmployee()"
                                            data-target="#lookupModalEmployee" data-toggle="modal" href="#">
                                            <i class="fa fa-search-plus"></i></button><a>{{model.employee_code}}</a>
                                        <input type="hidden" name="p_employee_code" [ngModel]="model.employee_code"
                                            required #employee_code="ngModel" />
                                        <input type="hidden" name="p_employee_name" [ngModel]="model.employee_name"
                                            required #employee_name="ngModel" />
                                    </span>
                                </div>
                                <small
                                    [hidden]="employee_code.valid || (employee_code.errors?.required && !masterdashboarduserdetailForm.submitted)"
                                    class="text-danger">
                                    Employee is required
                                </small>
                            </div>
                            <!--#endregion module name-->

                            <!--#region api function-->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="employee_name" class="control-label">Employee Name</label>
                                    <input type="text" class="form-control" [ngModel]="model.employee_name"
                                        maxlength="250" name="p_employee_name" readonly required
                                        #employee_name="ngModel">
                                </div>
                            </div>
                            <!--#endregion api function-->

                        </div>
                        <!--#endregion row-->
                    </form>
                    <!--#endregion form-->
                </div>

                <div *ngIf="param != null">
                    <span layout="row horizontal-divider">
                        <hr flex />
                    </span>
                    <div [hidden]="param == null" class="card-header">
                        <h5 class="card-title">Dashboard List</h5>
                    </div>
                    <div [hidden]="param == null" class="card-body">
                        <div class="toolbar">
                            <!--#region button add-->
                            <button type="button" class="btn btn-info btn-round" (click)="btnLookupModalDashboard()"
                                data-target="#lookupModalMasterdashboard" data-role="R00024420000006C"
                                data-toggle="modal" href="#">
                                Add
                            </button>
                            <button class="btn btn-danger btn-round" (click)="btnDeleteAll()"
                                data-role="R00024420000005D">
                                Delete
                            </button>
                            <!--#endregion button add-->
                        </div>

                        <!--#region list view-->
                        <table id="datatables" datatable [dtOptions]="dtOptions"
                            class="table table-striped table-bordered row-border hover" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th class="disabled-sorting">No</th>
                                    <th class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox" id="checkalltable"
                                                    [(ngModel)]="selectedAllTable" (change)="selectAllTable();" />
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </th>
                                    <th>Dashboard</th>
                                    <th>Grid</th>
                                    <th>Order No</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of listmasterdashboarduser;  let i=index">
                                    <td style="text-align: center;">{{listmasterdashboarduser.numberIndex+i+1}}</td>
                                    <td class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox"
                                                    [(ngModel)]="row.selected"
                                                    (change)="checkIfAllTableSelected($event, row.id);"
                                                    value="{{row.id}}" name="p_id">
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td style="width: 60%;text-align: left;">{{row.dashboard_name}}</td>
                                    <td style="width: 25%;text-align: left;">{{row.dashboard_grid}}</td>
                                    <td class="if-no-edit-btn" style="width: 15%;text-align: right;">
                                        <input type="text" class="form-control" name="p_order_key"
                                            value="{{row.order_key}}"
                                            (change)="orderKey($event, row.id, row.dashboard_code)">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--#endregion list view-->
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<!--#region lookup employee-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalEmployee"
    style="margin-top: -65px">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="overflow:hidden;">
                <div class="col-md-12">
                    <div class="card-body col-md-12">
                        <table id="datatableEmployee" class="table table-striped table-bordered hover" cellspacing="0"
                            style="min-width: 100%;">
                            <thead>
                                <tr>
                                    <th style="display: none;"></th>
                                    <th class="disabled-sorting">No</th>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th style="text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of lookupemployee;let i=index ">
                                    <td style="display: none;"></td>
                                    <td style="text-align: center;">{{lookupemployee.numberIndex+i+1}}</td>
                                    <td style="text-align: center; width: 20%;">{{ row.code }}</td>
                                    <td style="text-align: left; width: 80%;">{{ row.name }}</td>
                                    <td class="text-center">
                                        <button class="btn btn-outline-default btn-round"
                                            (click)="btnSelectRowModule(row.code, row.name)">Select</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--#endregion lookup employee-->

<!--#region lookup master dashboard-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalMasterdashboard"
    style="margin-top: -65px">
    <!-- spinner region -->
    <div class="panel-container-spinner" *ngIf="showSpinner">
        <app-spinner class="spinner-container"></app-spinner>
    </div>
    <!-- end spinner region -->
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="overflow:hidden;">
                <div class="col-md-12">
                    <div class="card-body col-md-12">
                        <!--#region button add-->
                        <button class="btn btn-info btn-round" (click)="btnSelectAllLookup()" role="P001" id="button">
                            add
                        </button>
                        <!--#endregion button add--->
                        <table id="datatableLookupDashboard" class="table table-striped table-bordered hover"
                            cellspacing="0" style="min-width: 100%;">
                            <thead>
                                <tr>
                                    <th class="disabled-sorting">No</th>
                                    <th class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox" id="checkallLookup"
                                                    [(ngModel)]="selectedAllLookup" (change)="selectAllLookup();" />
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </th>
                                    <th style="width: 20%;">Code</th>
                                    <th style="width: 80%;">Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of lookupmasterdashboard;  let i=index">
                                    <td style="text-align: center;">{{lookupmasterdashboard.numberIndex+i+1}}</td>
                                    <td class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox"
                                                    [(ngModel)]="row.selectedLookup"
                                                    (change)="checkIfAllLookupSelected($event, row.code);">
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td class="if-no-edit-btn" style="width: 20%; text-align: left;">{{ row.code }}</td>
                                    <td class="if-no-edit-btn" style="width: 80%; text-align: left;">{{
                                        row.dashboard_name }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--#endregion lookup master dashboard-->